<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link rel="stylesheet" href="stylesheets/screen.css" type="text/css" media="screen" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
      Stone: Dead-Simple Persistence
  </title>
  <script src="javascripts/rounded_corners_lite.inc.js" type="text/javascript"></script>
<style>

</style>
  <script type="text/javascript">
    window.onload = function() {
      settings = {
          tl: { radius: 10 },
          tr: { radius: 10 },
          bl: { radius: 10 },
          br: { radius: 10 },
          antiAlias: true,
          autoPad: true,
          validTags: ["div"]
      }
      var versionBox = new curvyCorners(settings, document.getElementById("version"));
      versionBox.applyCornersToAll();
    }
  </script>
</head>
<body>
<div id="main">

    <h1>Stone: Dead-Simple Persistence</h1>
    <div id="version" class="clickable" onclick='document.location = "http://rubyforge.org/projects/stone"; return false'>
      <p>Get Version</p>
      <a href="http://rubyforge.org/projects/stone" class="numbers">0.0.1</a>
    </div>
    <h1>&#x2192; &#8216;stone&#8217;</h1>


	<h2>What</h2>


	<p>For small applications, a database can be overkill for storing your data in a consistent and
organized manner. Therefore, Stone was built to provide plug-and-play data persistence for 
any application or framework. It is fast, and it is easy&#8230; it is good.</p>


	<h2>Installing</h2>


<pre>sudo gem install stone</pre>

	<h2>Getting Up and Running</h2>


	<h3>Rails</h3>


	<ul>
	<li>Create a new file in <code>config/initializers</code> called <code>stone.rb</code></li>
	</ul>


	<ul>
	<li>Add the following code to your new file:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">app/models/*</span><span class="punct">&quot;)))</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  stone-gen model:rails Author name:string
</pre></li>
	</ul>


	<h3>Merb</h3>


	<ul>
	<li>Add the following code to your <code>init.rb</code> file:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">app/models/*</span><span class="punct">&quot;)))</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  stone-gen model:merb Author name:string
</pre></li>
	</ul>


	<h3>Everywhere Else</h3>


	<p>Stone was designed to provide easy data storage management for <strong>any</strong>
app, not just web ones.</p>


	<ul>
	<li>Wherever you load your app, add the following:
<pre class='syntax'>
  <span class="ident">require</span> <span class="punct">'</span><span class="string">stone</span><span class="punct">'</span>
  
  <span class="comment"># replace my/path/to/models/ with wherever your models/resources may be</span>
  <span class="constant">Stone</span><span class="punct">.</span><span class="ident">start</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,</span> <span class="constant">Dir</span><span class="punct">.</span><span class="ident">glob</span><span class="punct">(</span><span class="constant">File</span><span class="punct">.</span><span class="ident">join</span><span class="punct">(</span><span class="constant">Dir</span><span class="punct">.</span><span class="ident">pwd</span><span class="punct">,&quot;</span><span class="string">my/path/to/models/*</span><span class="punct">&quot;)))</span>
</pre></li>
	</ul>


	<ul>
	<li>Create some models! We&#8217;ll use an Author as an example:
<pre class='syntax'>
  <span class="keyword">class </span><span class="class">Author</span>
    <span class="ident">include</span> <span class="constant">Stone</span><span class="punct">::</span><span class="constant">Resource</span>
    
    <span class="ident">field</span> <span class="symbol">:name</span>
    
    <span class="ident">has_many</span> <span class="symbol">:books</span>
  <span class="keyword">end</span>
</pre></li>
	</ul>


	<p>That&#8217;s it! Remember, there are no databases to install with Stone. Instead, 
your data gets persisted to files within <code>myapp/datastore/</code>.</p>


	<h2>Usage</h2>


	<h3>Get, Post, Put, and Delete</h3>


	<ul>
	<li>Getting
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">get</span><span class="punct">(</span><span class="ident">some_id</span><span class="punct">)</span>             <span class="comment"># gets Author with some_id</span>
  <span class="constant">Author</span><span class="punct">[</span><span class="ident">some_id</span><span class="punct">]</span>                 <span class="comment"># same as get()</span>
  
  <span class="comment"># brings back first author whose name contains &quot;Nick&quot;</span>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">first</span><span class="punct">(&quot;</span><span class="string">name.include?('Nick')</span><span class="punct">&quot;)</span>
  
  <span class="comment"># brings back all authors whose email contains &quot;gmail.com&quot;, and who </span>
  <span class="comment"># were created before some_date_time</span>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">all</span><span class="punct">(&quot;</span><span class="string">email.include?('gmail.com') &amp;&amp; created_at &lt; some_date_time</span><span class="punct">&quot;)</span>
</pre></li>
	</ul>


	<ul>
	<li>Posting
<pre class='syntax'>
  <span class="ident">author</span> <span class="punct">=</span> <span class="constant">Author</span><span class="punct">.</span><span class="ident">new</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">name</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Nick DeMonner</span><span class="punct">&quot;</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">save</span>                     <span class="comment"># calls Author.post after validations</span>
</pre></li>
	</ul>


	<ul>
	<li>Putting
<pre class='syntax'>
  <span class="ident">author</span> <span class="punct">=</span> <span class="constant">Author</span><span class="punct">[</span><span class="ident">some_id</span><span class="punct">]</span>        <span class="comment"># gets Author with id of some_id</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">name</span>                     <span class="comment"># =&gt; &quot;Nick DeMonner&quot;</span>
  
  <span class="ident">author</span><span class="punct">.</span><span class="ident">name</span> <span class="punct">=</span> <span class="punct">&quot;</span><span class="string">Bob Bobberson</span><span class="punct">&quot;</span>   <span class="comment"># changes name</span>
  <span class="ident">author</span><span class="punct">.</span><span class="ident">save</span>                     <span class="comment"># calls Author.put after validations</span>
</pre></li>
	</ul>


	<ul>
	<li>Deleting
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">delete</span><span class="punct">(</span><span class="ident">some_id</span><span class="punct">)</span>          <span class="comment"># deletes Author at some_id</span>
</pre></li>
	</ul>


	<h3>A Word About Finding Stuff</h3>


	<p>You&#8217;ll note that Stone uses a string containing ruby expressions to find
your data. Any method works here, just be careful when inserting values.</p>


	<ul>
	<li>This&#8230;
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">first</span><span class="punct">(&quot;</span><span class="string">name == <span class="expr">#{name}</span></span><span class="punct">&quot;)</span>
</pre>
...won&#8217;t work.</li>
	</ul>


	<ul>
	<li>Instead, use this&#8230;
<pre class='syntax'>
  <span class="constant">Author</span><span class="punct">.</span><span class="ident">first</span><span class="punct">(&quot;</span><span class="string">name == '<span class="expr">#{name}</span>'</span><span class="punct">&quot;)</span>
</pre>
... and your luck will change.</li>
	</ul>


	<h2>License</h2>


	<p>This code is free to use under the terms of the <span class="caps">MIT</span> license.</p>


	<h2>Contributing</h2>


	<p><span class="caps">PLEASE</span>. Stone is extremely immature at this point, and so &#8220;stable&#8221; is
the watchword for the moment.</p>


	<ul>
	<li>You can grab the source using Git:
<pre class='syntax'>
  git clone git://github.com/ndemonner/stone.git
</pre></li>
	</ul>


	<p>The code is pretty well specced out, so make sure you don&#8217;t break anything
by running <code>rake ok</code> every once in a while.</p>


	<p>Please add specs for any new functionality you might add, and hit me up to
commit. =D</p>


	<h2>Contact</h2>


	<p>Comments are welcome. Join me in the <span class="caps">IRC</span> channel #stone on freenode.</p>
    <p class="coda">
      Nick DeMonner, 12th April 2008<br>
      Theme extended from <a href="http://rb2js.rubyforge.org/">Paul Battley</a>
    </p>
</div>

<!-- insert site tracking codes here, like Google Urchin -->

</body>
</html>
